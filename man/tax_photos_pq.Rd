% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/tax_photos_pq.R
\name{tax_photos_pq}
\alias{tax_photos_pq}
\title{Find photos of taxa from GBIF or Wikitaxa}
\usage{
tax_photos_pq(
  physeq = NULL,
  taxonomic_rank = "currentCanonicalSimple",
  source = "gbif",
  folder_name = "photos_physeq",
  add_to_phyloseq = FALSE,
  gallery = FALSE,
  overwrite_folder = FALSE,
  col_name_url = "photo_url",
  verbose = TRUE,
  caption_valign = "bottom",
  caption_font_size = 12,
  simple_caption = FALSE,
  ...
)
}
\arguments{
\item{physeq}{A phyloseq object}

\item{taxonomic_rank}{(Character, default = "currentCanonicalSimple")
The column(s) present in the @tax_table slot of the phyloseq object. Can
be a vector of two columns (e.g. the c("Genus", "Species")).}

\item{source}{(Character) either "gbif" or "wikitaxa".}

\item{folder_name}{(default "photos_physeq") Name of the folder where photos
will be downloaded. Only used if both add_to_phyloseq and gallery are FALSE.}

\item{add_to_phyloseq}{(logical, default FALSE) If TRUE, a new phyloseq
object is returned with a new column  containing the URL
(entitled with the parameter col_name_url) in the tax_table.}

\item{gallery}{(logical, default FALSE) If TRUE, a html gallery is
created using  the function [pixture::pixgallery()].}

\item{overwrite_folder}{(logical, default FALSE) If TRUE, the folder
specified in the parameter folder_name will be deleted if it already exists.}

\item{col_name_url}{(default "photo_url") Name of the new column in the
tax_table}

\item{verbose}{(logical, default TRUE) If TRUE, prompt some messages.}

\item{caption_valign}{(character, default "bottom")
Vertical alignment of the caption in the gallery.}

\item{caption_font_size}{(int) Size of the caption font in the gallery.}

\item{simple_caption}{(logical, default FALSE) If TRUE, the caption of
the gallery photo will be only the taxonomic name. If FALSE, the caption
include information from the phyloseq object (number of sequences, taxa
and samples).}

\item{...}{Other parameters to be passed to pixture::pixgallery() function.}
}
\value{
There is three behavior.(i) If gallery = TRUE, a html gallery is
 created using  the function [pixture::pixgallery()].
 (ii) If add_to_phyloseq = TRUE, a new phyloseq object is returned
 with a new column (called with the parameter
 col_name_url) in the tax_table containing the URL. (iii) If both
 gallery = FALSE and add_to_phyloseq = FALSE, photos are downloaded in a
 folder (folder_name parameter) and the list of url are returned in the
 form of a tibble.
}
\description{
Find photos of taxa from GBIF or Wikitaxa
}
\details{
There is three behavior. See the returns section. Gbif source is quicker
 than wikitaxa source. Note that for the moment the function only return
 one photo per species.
}
\examples{

data_fungi_mini_cleanNames <- gna_verifier_pq(data_fungi_mini,
  add_to_phyloseq = TRUE
)
 data_fungi_cleanNames <- gna_verifier_pq(data_fungi,
   add_to_phyloseq = TRUE
 )

# tax_photos_pq(data_fungi_mini_cleanNames)

 # tax_photos_pq(data_fungi_mini_cleanNames,
#                    source = "wikitaxa")

tax_photos_pq(data_fungi_cleanNames,
                   gallery = TRUE,
                   h="40px",
                   w="80px"
                  )
tax_photos_pq(data_fungi_cleanNames,
                   gallery = TRUE,
                   h="40px",
                   w="80px",
                   simple_caption = TRUE
                  )
tax_photos_pq(data_fungi_mini_cleanNames,
                   gallery = TRUE,
                   h="40px",
                   w="80px",
                   source = "wikitaxa"
                  )

tax_photos_pq(data_fungi_mini_cleanNames,
                   gallery = TRUE,
                   layout="rhombus"
                  )

data_fungi_mini_cleanNames_photos <-
  tax_photos_pq(data_fungi_mini_cleanNames,
                     add_to_phyloseq = TRUE)

# Which photo(s) depicted more than one OTU
data_fungi_mini_cleanNames_photos@tax_table[,"photo_url"] |>
  table() |>
  (\(tab) tab[as.numeric(tab) > 1])()

}
\author{
Adrien Taudière
}
