% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot_tax_gbif_pq.R
\name{plot_tax_gbif_pq}
\alias{plot_tax_gbif_pq}
\title{Plot the taxa occurence using gbif.range package}
\usage{
plot_tax_gbif_pq(
  physeq = NULL,
  taxonomic_rank = "currentCanonicalSimple",
  taxnames = NULL,
  interactive_plot = FALSE,
  zcol = c("year", "taxonomicStatus"),
  hexagons = FALSE,
  bins = 100,
  verbose = TRUE,
  countries = NULL,
  info_names = c("country", "country code", "acceptedScientificName", "ScientificName"),
  ...
)
}
\arguments{
\item{physeq}{A phyloseq object}

\item{taxonomic_rank}{(Character, default "currentCanonicalSimple")
The column(s) present in the @tax_table slot of the phyloseq object. Can
be a vector of two columns (e.g. c("Genus", "Species")).}

\item{taxnames}{(A character vector of taxonomic names. If provided, physeq is ignored.)}

\item{interactive_plot}{(logical, default FALSE) If TRUE, an interactive map is created using the package mapview.}

\item{zcol}{(character vector, default c("year", "taxonomicStatus")) Only used if interactive_plot is TRUE. The column(s) of the occurrences to use for coloring the points in the interactive map. See ?mapview::mapview() for more details.}

\item{hexagons}{(logical, default FALSE) Only used if interactive_plot is
FALSE. If TRUE, use hexagonal binning to plot the occurrences.
If FALSE, plot the occurrences as points.}

\item{bins}{(Number of bins for hexagonal binning, default 100) Only used if hexagons is TRUE and interactive_plot is FALSE.}

\item{verbose}{(logical, default TRUE) If TRUE, prompt some messages.}

\item{countries}{A character vector of country names to filter the occurrences. If NULL (default), all countries are used (no filter).}

\item{info_names}{(Character vector)
The information to retrieve from GBIF for each occurrence. See
[gbif.range::get_gbif()] for more details.}

\item{...}{Additional arguments to pass to [gbif.range::get_gbif()].}
}
\value{
A list of ggplot2 objects, one for each taxon.
}
\description{
A wrapper of [gbif.range::get_gbif()] function to plot the range of taxa
  using ggplot2. The function can take either a phyloseq object or a vector of
  taxonomic names. If a phyloseq object is provided, the taxonomic names are
  extracted from the specified taxonomic rank.
  The occurrences are plotted either as points or using hexagonal binning.
  The function can also filter the occurrences by country.
}
\examples{

p <- plot_tax_gbif_pq(
  subset_taxa_pq(
    data_fungi_mini_cleanNames,
    taxa_sums(data_fungi_mini) > 20000
  ),
  hexagons = TRUE,
  verbose = TRUE, bins = 50, occ_samp = 100, grain = 10000
)

p <- plot_tax_gbif_pq(taxnames = c("Xylobolus subpileatus", "Stereum #'  subpileatus"))

p <- plot_tax_gbif_pq(taxnames = c("Stereum ostrea", "Mycena renati"))
requireNamespace(patchwork)
p[[1]] / p[[2]] & no_legend()

p <- plot_tax_gbif_pq(taxnames = c("Stereum ostrea", "Mycena renati"), interactive_plot = TRUE)
p[[1]]

p <- plot_tax_gbif_pq(taxnames = c("Xylobolus subpileatus", "Stereum  subpileatus"), hexagons = TRUE, verbose = F)

p <- plot_tax_gbif_pq(taxnames = c("Xylobolus subpileatus", "Stereum #'  subpileatus"), hexagons = TRUE, verbose = F, countries = c("france", "spain"))

p[[1]] + coord_fixed(ylim = c(30, 50), xlim = c(-5, 25)) + no_legend()

p <- plot_tax_gbif_pq(
  taxnames = c(
    "Ossicaulis lachnopus",
    "Antrodiella brasiliensis", "Stereum ostrea", "Xylobolus subpileatus"
  ),
  hexagons = TRUE,
  verbose = F, bins = 50, occ_samp = 100, grain = 10000
)

requireNamespace("patchwork")
(p[[1]] + p[[2]]) /
  (p[[3]] + p[[4]]) & no_legend()

}
\author{
Adrien TaudiÃ¨re
}
